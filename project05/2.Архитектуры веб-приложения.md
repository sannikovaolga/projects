# Архитектура

## Уровни веб-приложения

Существует четыре общих уровня веб-приложений:

- **Уровень представления (PL)**

PL отображает пользовательский интерфейс и упрощает взаимодействие с пользователем. Уровень представления имеет компоненты пользовательского интерфейса, которые визуализируют и показывают данные для пользователей. Также существуют компоненты пользовательского процесса, которые задают взаимодействие с пользователем. PL предоставляет всю необходимую информацию клиентской стороне. Основная цель уровня представления - получить входные данные, обработать запросы пользователей, отправить их в службу данных и показать результаты.

- **Уровень обслуживания данных (DSL)**

DSL передает данные, обработанные уровнем бизнес-логики, на уровень представления. Этот уровень гарантирует безопасность данных, изолируя бизнес-логику со стороны клиента.

- **Уровень бизнес-логики (BLL)**

BLL несет ответственность за надлежащий обмен данными. Этот уровень определяет логику бизнес-операций и правил. Вход на сайт - это пример уровня бизнес-логики.

- **Уровень доступа к данным (DAL)**

DAL предлагает упрощенный доступ к данным, хранящимся в постоянных хранилищах, таких как двоичные файлы и файлы XML. Уровень доступа к данным также управляет операциями CRUD - создание, чтение, обновление, удаление.

## Монолитная архитектура веб-приложения

Монолитная архитектура представляет собой традиционный подход к разработке ПО, при котором все компоненты приложения объединены в одно целое. Весь код хранится в одном репозитории, и все компоненты разрабатываются, тестируются и развертываются вместе.

## Микросервисная архитектура веб-приложения

 Архитектура микросервисов представляет собой модульный подход к разработке ПО, при котором приложение состоит из множества небольших, автономных сервисов, каждый из которых выполняет определенную функцию. Каждый микросервис разрабатывается, тестируется и развертывается независимо.

## Различия монолитной и микросервисной архитектурами

| Категория      | Монолитная архитектура | Микросервисная архитектура |
|:--------------:|:----------------------:|:--------------------------:|
| Проектирование | Единая кодовая база с несколькими взаимозависимыми функциями. | Независимые программные компоненты с автономными функциональными возможностями, которые взаимодействуют друг с другом через API.|
| Разработка |Требует меньше планирования на начальном этапе, но сложность понимания и поддержки постепенно растет.| Требует больше планирования и инфраструктуры на начальном этапе, но со временем управление и обслуживание упрощаются.
|Развертывание|Все приложение развернуто как единое целое.| Каждый микросервис представляет собой независимый программный объект, требующий индивидуального контейнерного развертывания.|
|Отладка|Весь путь кода можно отслеживать в одной среде.|Требуются сложные инструменты отладки, умеющие отслеживать обмен данными между несколькими микросервисами.|
|Модификация|Небольшие изменения влекут за собой большие риски, поскольку затрагивают всю базу кода.|Можно изменять отдельные микросервисы, не затрагивая приложение в целом.|
|Масштабирование|Необходимо масштабировать все приложение, даже если увеличится нагрузка только на некоторые функциональные области.|При необходимости можно масштабировать отдельные микросервисы, что снижает общие затраты на масштабирование. |
|Инвестиции|Низкие первоначальные инвестиции, но более высокий объем работ по текущему и техническому обслуживанию.|Дополнительные затраты времени и средств на создание инфраструктуры и накопление опыта в команде. С другой стороны — долгосрочная экономия затрат, более простое обслуживание и адаптивность.|

## Выбор архитектуры

Причины, по которым не все приложения постоены на микросерверной архитектуре:

- **Сложность разработки**  
Микросервисная архитектура требует более сложной разработки и управления, чем монолитная архитектура.  
Она требует наличия навыков и инструментов для управления множеством микросервисов, и которые не всегда доступны разработчикам.

- **Затраты на инфраструктуру**  
Построение и поддержание инфраструктуры для микросервисной архитектуры может быть более затратным, чем для монолитной архитектуры.  
Каждый микросервис требует собственного хостинга, мониторинга, масштабирования и управления, что может повысить расходы на инфраструктуру.

- **Опыт команды разработчиков**  
 Для успешной реализации микросервисной архитектуры команда разработчиков должна обладать достаточным опытом.  
 Не все команды разработчиков имеют достаточные знания для проектирования, разработки и поддержки микросервисов.

- **Размер проекта**  
Микросервисная архитектура наиболее полезна для крупных проектов, в которых разные функции могут быть разделены на отдельные микросервисы.  
Для небольших проектов применение микросервисной архитектуры может быть излишним и лишь добавить сложности.

- **Производительность**  
В микросервисной архитектуре передача данных между микросервисами происходит через сеть.  
Это может привести к некоторым накладным расходам на сетевое взаимодействие и ухудшить производительность по сравнению с монолитной архитектурой.

## Особенности тестирования монолитных и микросервисных приложений

Тестирование монолитных и микросервисных веб-приложений имеет некоторые отличия из-за особенностей архитектуры и взаимодействия компонентов. Тестирование микро-сервисных приложений осложнено тем, что у каждого модуля свои уязвимости и ошибки безопасности, поэтому вам придется отслеживать больше потенциальных уязвимостей, а отладка каждого отдельного элемента может занять много времени. Монолитные приложения чаще всего легче тестировать, поскольку при тестировании и отладке необходимо отслеживать только один репозиторий кода.

**Особенности тестирования монолитных веб-приложений:**

- Монолитные приложения являются единым целым и работают внутри одного процесса. Поэтому тестирование может быть более простым и предсказуемым.
- Весь функционал приложения находится внутри одной кодовой базы, поэтому тестирование может быть произведено в рамках одного проекта.
- Для тестирования используются инструменты, специфичные для монолитных приложений, такие как модульные тесты, интеграционные тесты и функциональные тесты.

**Особенности тестирования микросервисных веб-приложений:**

- Микросервисные приложения состоят из набора независимых сервисов, которые могут быть написаны на разных языках программирования и работать на разных серверах. Поэтому тестирование должно быть ориентировано на взаимодействие между сервисами.
- Тестирование каждого сервиса может быть произведено отдельно с использованием модульных тестов. Также необходимо проводить интеграционное тестирование для проверки взаимодействия между сервисами.
- Так как микросервисные приложения работают в распределенной среде, необходимо учитывать возможные сбои и задержки при взаимодействии между сервисами при проведении тестирования.
Используются инструменты, специфичные для микросервисных приложений, такие как инструменты для тестирования REST API, контейнерные технологии для развертывания и тестирования сервисов, инструменты для симуляции и контроля взаимодействия между сервисами.
