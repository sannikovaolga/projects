# MPA, SPA, PWA

## SPA

Single Page Application –  одностраничное веб-приложение, загружаемое на одной HTML-странице и не требующее перезагрузки за счёт динамического обновления с помощью AJAX (во время использования не нужно перезагружать или подгружать дополнительные страницы).  
На практике это означает, что пользователь видит в браузере весь основной контент, а при прокрутке или переходах на другие страницы, вместо полной перезагрузки нужные элементы просто подгружаются.

**Примеры SPA:**

- Gmail (<https://mail.google.com/>),
- Яндекс-почта (<https://mail.yandex.ru/>)
- калькулятор "Тинькоф Банка" (<https://journal.tinkoff.ru/need-more-salary/>)

**Преимущества:**

- высокая скорость - все ресурсы загружаются за одну сессию, а во время действий на странице данные просто меняются, что очень экономит время
- кэширование данных — приложение отправляет всего один запрос, собирает данные, а после этого может функционировать в offline-режиме.
- гибкость и отзывчивость за счёт отсутствия перезагрузки и повторного рендеринга (улучшенное восприятие пользовательского интерфейса, поскольку загрузка данных с сервера происходит в фоновом режиме)
- оптимизированная и упрощённая разработка - Нет необходимости писать код на сервере для визуализации страницы; Разделение на Front-end и Back-end — разработку; Упрощенная разработка под мобильные приложения; вы можете повторно использовать один и тот же серверный код для веб-приложения и мобильного приложения.

**Недостатки:**

- увеличенная нагрузка на браузер - из-за того, что клиентские фреймворки тяжелые, они довольно долго загружаются
- необходима поддержка JavaScript — без JS нельзя полноценно пользоваться полным функционалом приложения
- необходимость обеспечить хорошую защиту данных - из-за межсайтового скриптинга (XSS) злоумышленники могут получить доступ к коду и добавлять скрипты на стороне клиента. Веб-формы не компилируются, а потому их сложнее отлаживать и они содержат больше уязвимостей, которыми могут воспользоваться злоумышленники;
- SEO оптимизация требует решений в виде серверного рендеринга — из-за того, что контент загружается при помощи технологии AJAX, которая подразумевает динамическое изменение содержания станицы, а для оптимизации важна устойчивость; поскольку большая часть веб-страницы строится на стороне клиента, боты поисковых систем видят страницу совершенно иначе, чем пользователь;

**Целесообразен, если:**

- есть необходимость в многофункциональном, насыщенном пользовательском интерфейсе;
- есть необходимость в интерфейсе API — использовании готовых блоков для построения приложения.
- подходит для проектов, где SEO не играет большой роли и не нужно индексировать каждую страницу. Например, для SaaS-платформ.

Стоит отметить, что SPA часто является частью архитектуры многостраничного вебсайта. К примеру, основная часть ресурса может быть многостраничной, а личный кабинет реализован в виде SPA.

## MPA

Multi Page Application — это многостраничные приложения, которые работают по традиционной схеме - при каждом незначительном изменении данных или загрузке новой информации страница обновляется.  
Такие приложения тяжелее, чем одностраничные, поэтому их использование целесообразно только в тех случаях, когда нужно отобразить большое количество контента.

**Примеры MPA:**

- Интернет-магазин DNS (<https://www.dns-shop.ru/>)
- Интернет-магазин Two-ta (<https://two-ta.ru/>)
- Интрнет-магазин Онлайн-трейд (<https://www.onlinetrade.ru/>)

**Преимущества:**

- Простая SEO оптимизация — можно оптимизировать каждую из страниц приложения под нужные ключевые запросы;
- Привычность для пользователей — за счет простого интерфейса и классической навигации.
- Возможность получить данные о поведении пользователя в веб-приложении

**Недостатки:**

- сложная разработка - требуют использования фреймворков как на стороне клиента, так и на стороне сервера, что увеличивает сроки и бюджет разработки
- Тесная связь между бекендом и фронтендом, поэтому их не получается развивать параллельно;

**Целесообразен, если:**

- приложения используются только для чтения информации;
- есть необходимость в использовании приложения в браузерах без поддержки JavaScript.
- лучше использовать для информационных ресурсов, интернет-магазинов, каталогов и маркетплейсов. Если ваша компания предоставляет большое количество товаров или услуг

## PWA прогрессивные веб-приложений

(Progressive Web Apps) – это сайт, построенный на веб-технологиях с помощью JavaScript, HTML и CSS и взаимодействующий с посетителем как приложение. Он может добавляться на главный экран мобильных устройств и отправлять push-уведомления. За счёт доступа к аппаратным средствам устройства PWA работает без подключения к интернету.

**Пример:**  

- Росбанк (<https://www.rosbank.ru/?>)
- Telegram Web (<https://web.telegram.org/a/>)
- YouTube (<https://www.youtube.com/>)

**Преимущества:**

- простота в разработке: создание PWA – это не создание отдельного сайта, а минимальное изменение существующего
- высокая скорость работы и возможность запуска и отображения данных в офлайн-режиме (благодаря кэшированию страниц) с моментальной загрузкой
- кроссплатформенность -могут работать сразу с несколькими операционными системами
- высокая скорость установки;
- минимальные требования к ресурсам устройств;

**Недостатки:**

- не всеми браузерами поддерживаются все функции (например, Firefox и Edge);
- SEO-оптимизация

SPA может быть PWA, но PWA совсем не обязательно должен быть SPA.
Различие в том, что прогрессивные веб-приложения, помимо этого, предоставляет возможность работы в офлайн-режиме с моментальной загрузкой.
PWA можно назвать гибридом сайта и мобильного приложения — он берет все лучшее от обоих решений.
От сайта PWA отличается тем, что не требует наличия интернет-соединения и стабильно быстро загружает страницы.
От мобильных приложений PWA отличается легкостью в создании и использовании. Простота заключается в том, что не нужно разрабатывать отдельные версии для каждой операционной системы.

**Технологии для реализации PWA:**

- Service Worker

Это технология, которая позволяет веб-приложению работать в фоновом режиме и выполнять задачи, такие как кэширование данных, уведомления и оффлайн-работа.

- Responsive Design

PWA должно быть разработано с использованием отзывчивого дизайна, чтобы адаптироваться к разным экранам и устройствам.

- HTTPS

PWA требует использования HTTPS-протокола для обеспечения безопасности пересылаемых данных между сервером и клиентом.

- Web App Manifest
  
Это JSON-файл, который определяет настройки и метаданные приложения, такие как иконки, название, цветовую схему и ориентацию экрана.

- Push Notifications

PWA может отправлять уведомления на устройства пользователей, чтобы информировать их о важных событиях или обновлениях.

## Различия тестирования SPA и MPA

| Различия                 | SPA                                                                                   | MPA                                                           |
|:------------------------:|:-------------------------------------------------------------------------------------:|:-------------------------------------------------------------:|
| обновление страницы      | проверка корректности обновления контента и состояния приложения при каждом изменении | проверка работоспособности каждой страницы                    |
| навигация                | проверка переходов между различными виртуальными "страницами"                         | проверка переходов между фактическими страницами              |
| асинхронные запросы      | проверка корректности обработки этих запросов и отображения полученных данных.        | проверка страницы и её состояния после загрузки           |
| компоненты и зависимости | проверка каждого компонента на правильной работоспособность и их взаимодействия       | проверка работоспособности и взаимодействия отдельных страниц |

## Тестирование PWA

Если приложение построено на архитектуре PWA, тестировщикам необходимо проверить несколько конкретных вещей:

1. Проверить файл манифеста: 
Файл манифеста в PWA — это простой файл JSON. Это делает веб-приложения похожими на собственные приложения. 

Файл манифеста состоит из 3 основных частей:

- Идентификация: включает имя, краткое имя и описание. Ключ короткого имени должен быть подтвержден, так как то же имя будет отображаться на экране «Добавить на главный экран».

- Манифест: Манифест включает в себя такие ключи, как начальный URL-адрес, цвет темы, цвет фона, ориентация и отображение.

- Начальный URL-адрес: это значение должно быть подтверждено, поскольку начальный URL-адрес будет рассматриваться как стартовая страница, когда пользователь нажимает на значок приложения и запускает его.
Display: свойство Display управляет режимом отображения приложения, таким как полноэкранный режим, минимальный пользовательский интерфейс и т. д.

- Цвет темы и цвет фона. Эти свойства определяют цвет адресной строки и фона приложения.
Ориентация: этот ключ определяет ориентацию по умолчанию для таких приложений, как книжная, альбомная и т. д.
Значки: значок — это свойство, содержащее набор значков, которые будут использоваться для значка главного экрана, значка просмотра задач и т. д.

- Проверка Service Workers: Service Worker — это простой скрипт, работающий в фоновом режиме, который включает такие функции, как push-уведомления, фоновая синхронизация и т. д.

- Push-уведомления. Push-уведомления должны работать в PWA так же, как и в нативных приложениях.

- Отзывчивость: PWA поддерживает все устройства, и внешний вид его пользовательского интерфейса должен оставаться одинаковым на всех устройствах, поэтому это необходимо протестировать.

- Безопасные соединения: все содержимое веб-сайтов, включая сторонние скрипты и стили, должно передаваться через HTTPS, чтобы приложение работало без сбоев.

- Медленная сеть/автономный режим: Убедитесь, что приложение работает должным образом, даже если пропускная способность сети низкая или отсутствует подключение к Интернету.

- Тестирование функциональности . Помимо функций, специфичных для PWA, тестировщики должны убедиться, что все остальные функции работают должным образом на всех устройствах.
Излишне говорить, что PWA необходимо тестировать на реальных мобильных устройствах, чтобы проверить функциональность на разных устройствах. Как упоминалось ранее, разные архитектуры устройств заставят PWA работать по-разному, поэтому требуется тестирование реального устройства.
